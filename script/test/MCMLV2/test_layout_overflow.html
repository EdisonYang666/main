<!-- "script/test/MCMLV2/test_layout_overflow.html" -->
<html>
<pe:mcml>
<script type="text/npl" refresh="false">
    <![CDATA[
    local LineHeightData = {"", "80px"};
    local PaddingData = {"", "5px"};
    local BackgroundColorData = {"", "green"};
    local FontSizeData = {"", "24px"};

    local changeMap = {
        ["line_height"] = {
            ["data"] = LineHeightData,
            ["property"] = "line-height",
        },
        ["padding"] = {
            ["data"] = PaddingData,
            ["property"] = "padding",
        },
        ["background_color"] = {
            ["data"] = BackgroundColorData,
            ["property"] = "background-color",
        },
        ["font_size"] = {
            ["data"] = FontSizeData,
            ["property"] = "font-size",
        }
    }

    function SetNodeProperty(node,key,value)
        node:GetInlineStyleDecl():SetProperty(key,value);
    end

    function GetGoalNodeInfo(str)
        local name = string.match(str,"(%w*)");
        local tag = string.match(name,"(%a*)");
        local path = tag.."#"..name;
        local property = string.gsub(str, name.."_", "");
        return path, property;
    end

    function GetGoalNode(nodePath)
        local nodes = Page:jquery(nodePath);
        local node = nodes[1];
        return node;
    end
    
    function ChangeNodeProperty(checked, node)
        local name = node:GetAttribute("name");
        local path, property = GetGoalNodeInfo(name);
        local goal_node = GetGoalNode(path);
        --echo({path, property})
        local property_key = changeMap[property]["property"];
        local index = if_else(checked, 2, 1);
        local property_value = changeMap[property]["data"][index];
        --echo({goal_node.attr.name, property_key, property_value});
        SetNodeProperty(goal_node, property_key, property_value);
    end

    function ClearBackgroundColor()
        local nodes = Page:jquery("div#div11");
        local node = nodes[1];
        SetNodeProperty(node, "background-color", "red");
    end
    ]]>
</script>
<div name="div1" style="background-color:antiquewhite;margin:20px;">
    <!--<div name="div11" id="div2" style="margin:20px;width:100px;height:80px;background-color:aqua;">
        11111<span style="background-color:greenyellow;">222</span>
    </div>-->
    <!--<input name="button" type="button" value="改变div2背景色" style="margin:10px;padding:10px;background-color:white;color:aqua;font-weight:bold;color:blueviolet;" onclick="ClearBackgroundColor()" />-->
    <!--<scrollarea id="MyDIV" style="width:80px;height:80px;overflow:auto;background-color:red;">LayoutBoxModelObject</scrollarea>-->
    
    <div name="divText" style="padding:20px;background-color:green;width:80px;height:80px;overflow:auto;">
        <span style="background-color:greenyellow;">11111111</span>0123456789abcdefghijklmn 22222 3333333 <span style="background-color:red;">4444444444</span> 55555 66666 77777 88888 99999
    </div>
    <div name="divImg" style="padding:20px;background-color:green;width:180px;height:180px;overflow:auto;">
        111<img name="img" id="img" src="Textures/icon1.png" width="190" height="190" />222
        <!--<div name="divTest" style="background-color:red;width:20px;height:20px;">
        </div>-->
    </div>
    <!--<div name="divImg" style="background-color:green;width:180px;height:180px;overflow-x:hidden;">
        <img name="img" id="img" src="Textures/icon1.png" width="180" height="180" />
        <input type="radio" checked="checked" name="Sex" value="male" />男性
    </div>-->
    <div style="padding:20px;background-color:green;width:80px;height:80px;overflow:auto;">
        <input type="radio" checked="checked" name="Sex" value="male" />男性
        <br />
        <input type="radio" name="Sex" value="female" />女性
        <br />
        <input name="checkbox" type="checkbox" />课程一
        <br />
        <input name="checkbox" type="checkbox" />课程二
        <br />
        <input name="checkbox" type="checkbox" />课程三
    </div>
    <!--<input type="checkbox"/>-->
    <!--<div name="div1" style="background-color:antiquewhite;">
        <div style="background-color:green;margin:20px;width:40px;">
            222 33<span style="background-color:red;padding:5px;">11111</span>
        </div>
    </div>-->
</div>

</pe:mcml>
</html>